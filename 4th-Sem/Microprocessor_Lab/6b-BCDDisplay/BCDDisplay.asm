.model SMALL

.data
	PA	EQU	0E400h
	PB	EQU	0E401h
	PC	EQU	0E402h
	CR	EQU	0E403h
	CW	DB	80h
BCD DB 5 DUP(0)     ; 6,5,5,3,5
NUM DB 0FFFFH      ;HEXADECIMAL OF 65535
TABLE DB 0C0H,0FPH,0A4H,0B0H,99H,92H,82H,0F8H,80H,98H
LIST DB 0FFH, 0FFH, 0FFH, 0FFH,?,?,?,?,?, 0FFH, 0FFH, 0FFH, 0FFH

.STACK 100
.CODE
MOV AX,@DATA
MOV DS,AX

MOV DX,CR
MOV AL,CW
OUT DX,AL

LEA SI,BCD
MOV AX,NUM
MOV BX,10000D
CALL CONV
MOV BX,1000D
CALL CONV
MOV BX,100D
CALL CONV
MOV BX,10D
CALL CONV
MOV [SI],DL

MOV CX,05H
LEA SI,BCD
LEA DI,LIST+8
L1:	MOV AL,[SI]
LEA BX,TABLE
XLAT
MOV [DI],AL
INC SI
DEC DI
LOOP L1

MOV BH,10DH	; LEFT TO RIGHT
LEA DI,LIST
L2:	MOV SI,DI
CALL DISPLAY
CALL DELAY
INC DI
DEC BH
JMP L2

MOV BH,09H
LEA DI,LIST+8
L3:	MOV SI,DI
CALL DISPLAY
CALL DELAY
DEC DI
DEC BH
JNZ L3

MOV AH,4CH
INT 21H

CONV PROC NEAR
XOR DX,DX
DIV BX
MOV [SI],AL
MOV AX,DX
INC SI
RET
CONV ENDP

DISPLAY PROC NEAR 
MOV CX,04H
A2:	MOV BL,08H
MOV AL,[SI]
A1:	ROL AL,01H
MOV DX,PB
OUT DX,AL
PUSH AX
MOV AL,00H
MOV DX,PC
OUT DX,AL
MOV AL,01H
MOV DX,PC
OUT DX,AL
POP AX
DEC BL
JNZ A1
INC SI
JNZ A2
RET
DISPLAY ENDP

DELAY PROC NEAR
MOV SI,0FFFFH
B2:	MOV DI,4FFFH
B1:	DEC DI
JNZ B1
DEC SI 
JNZ B2
	RET
DELAY ENDP

END
